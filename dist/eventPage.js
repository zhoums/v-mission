!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.darenCateTypeList=[701,704],t.TWCateTypeList=[801],t.darenFansCountList=["100万以上","50-100万","30-50万","10-30万","10万以下"],t.darenRoleList=["美搭","美妆个护","居家","美食","母婴","型男","数码科技","运动","汽车","文化娱乐","萌宠","园艺","动漫","星座","摄影","游戏","旅游","其他"],t.darenChannel=["微淘","淘宝头条","有好货","必买清单","ifashion","每日好店","装备天地","酷玩星球","全球时尚","美妆学院","极有家","汇吃"],t.cateType=[602,601,603,604],t.vedioCateType=["店铺故事","使用评测","清单盘点","教程教学"],t.default={token:"KE923jddu#@(DFDJiw1dI$*FYHHHHH",willbeServer:"http://spider.ittun.com/spider-oper"}},function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||i(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,a,o=d(n(4)),s=(r=h(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),i=(a=h(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=6,L();case 6:if(n=e.sent,t=[].concat(p(t),p(n.result.list)),!(1<n.result.maxPage)){e.next=19;break}console.log("turnPage"),r=2;case 11:if(r<=n.result.maxPage)return e.next=14,L(r);e.next=19;break;case 14:a=e.sent,t=[].concat(p(t),p(a.result.list));case 16:r++,e.next=11;break;case 19:return t.splice(1,0,t[0]),t.forEach(function(e,n){chrome.tabs.getSelected(null,function(r){l.default.sleep(3e3);var a=r.id;chrome.tabs.update(a,{url:e.url,selected:!0}),chrome.tabs.sendRequest(a,{greeting:"getArctilUrl",isLast:t.length==n+1},function(e){})})}),e.abrupt("return");case 22:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),u=(h(o.default.mark(function e(){var t,n,r=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return(t=e.sent).result.list.forEach(function(){var e=h(o.default.mark(function e(t,n){var a,s,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},s=null,i="",e.next=5,$.ajax({url:"https://v.taobao.com/micromission/daren/daren_main_portalv3.do?userId="+t.userId,success:function(e){e=JSON.parse(e),s=Object.assign({},e)}});case 5:return s.data.desc&&JSON.parse(s.data.desc).blocks.forEach(function(e,t){e.text&&(i+=e.text)}),a.darenId=t.userId,a.darenName=s.data.darenNick,a.fansCount=s.data.fansCount,a.agencyName=s.data.darenAgency.agencyName,a.agencyUrl="https://v.taobao.com/v/home?spm=a21xh.11250901.0.0.14c46b6fNZot7a&userId="+s.data.darenAgency.agencyID,a.vUrl="https://v.taobao.com/v/home/?spm=a21xh.8861523.801.1.5f024accJ0p9KH&userId="+t.userId,a.scoreDarenCapacity=s.data.darenScore,a.orderTakingRate=s.data.darenMissionData.receiveRate+"%",a.orderTakingResponseTime=s.data.darenMissionData.responseTime,a.serviceTotalCustomer=s.data.darenMissionData.cooperateSellerCount,a.serviceTotalQuantity=s.data.darenMissionData.completeMission,a.serviceType=s.data.darenMissionData.servType,a.serviceDomain=s.data.userId,a.introduction=i,a.identityType="",a.serviceScore=s.data.darenMissionData.avgScore,a.orderTakingFinishRate=s.data.darenMissionData.completeRate+"%",e.next=25,$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskDetail.wb",beforeSend:function(e){e.setRequestHeader("token",c.default.token)},type:"post",data:a,success:function(e){console.log("post",e)}});case 25:l.default.sleep(600*Math.random()+200);case 26:case"end":return e.stop()}},e,r)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return");case 7:if(n<=t.result.maxPage)return e.next=10,M(n);e.next=16;break;case 10:e.sent.result.list.forEach(function(){var e=h(o.default.mark(function e(t,n){var a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},s=null,e.next=4,$.ajax({url:"https://v.taobao.com/micromission/daren/daren_main_portalv3.do?userId="+t.userId,success:function(e){e=JSON.parse(e),s=Object.assign({},e)}});case 4:return a.darenId=t.userId,a.darenName=s.data.darenNick,a.fansCount=s.data.fansCount,a.agencyName=s.data.darenAgency.agencyName,a.agencyUrl="https://v.taobao.com/v/home?spm=a21xh.11250901.0.0.14c46b6fNZot7a&userId="+s.data.darenAgency.agencyID,a.vUrl="",a.scoreDarenCapacity=s.data.darenScore,a.orderTakingRate=s.data.darenMissionData.receiveRate+"%",a.orderTakingResponseTime=s.data.darenMissionData.responseTime,a.serviceTotalCustomer=s.data.darenMissionData.cooperateSellerCount,a.serviceTotalQuantity=s.data.darenMissionData.completeMission,a.serviceType=s.data.darenMissionData.servType,a.serviceDomain=s.data.userId,a.introduction="",a.identityType="",a.serviceScore=s.data.darenMissionData.avgScore,a.orderTakingFinishRate=s.data.darenMissionData.completeRate+"%",e.next=23,$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskDetail.wb",beforeSend:function(e){e.setRequestHeader("token",c.default.token)},type:"post",data:a,success:function(e){console.log("post",e)}});case 23:case"end":return e.stop()}},e,r)}));return function(t,n){return e.apply(this,arguments)}}()),n==t.result.maxPage&&console.log("v task done, maxPage is "+t.result.maxPage);case 13:n++,e.next=7;break;case 16:e.next=19;break;case 18:console.log("v task done, maxPage is 1");case 19:case"end":return e.stop()}},e,this)})),n(0)),c=d(u),l=d(n(7)),f=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var s=t[a](o),i=s.value}catch(a){return void n(a)}if(!s.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}var v=navigator.userAgent.toLowerCase().match(/chrome\/[\d.]+/gi).toString().match(/[\d]{1,}/g),m=72<=Number(v[0])?["blocking","requestHeaders","extraHeaders"]:["blocking","requestHeaders"];chrome.webRequest.onBeforeSendHeaders.addListener(function(e){if("xmlhttprequest"===e.type){for(var t=!1,n=0;n<e.requestHeaders.length;++n)if("Referer"===e.requestHeaders[n].name){t=!0,e.requestHeaders[n].value="https://v.taobao.com/";break}return t||e.requestHeaders.push({name:"Referer",value:"https://v.taobao.com/"}),{requestHeaders:e.requestHeaders}}},{urls:["https://*.taobao.com/*"]},m);var y,g,b,w=[],x=1,_=-1,k="KE923jddudk3FYjWedkHH",T=void 0,S=1,D=0,j=new f.default;function M(e){var t=1800*Math.random()+200;l.default.sleep(t);var n=e||1;return new Promise(function(e,t){$.ajax({url:c.default.willbeServer+"/tb/v/getAllVTaskDarenIds.wb?page="+n+"&pageSize=500",beforeSend:function(e){e.setRequestHeader("token",c.default.token)},success:function(t){e(t)}})})}function L(e){var t=e||1;return new Promise(function(e,n){$.ajax({url:c.default.willbeServer+"/tb/front/getDarenArticleUrl.wb?page="+t+"&pageSize=20",beforeSend:function(e){e.setRequestHeader("token",c.default.token)},success:function(t){e(t)}})})}j.tail("postFinishAll",(y=h(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.default.sleep(1e3),S<3?se(S+=1,10):(S=1,D=0,ie());case 2:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})),j.tail("postMyVerification",(g=h(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.default.sleep(1e3),S<D?ie(S+=1,10):(S=1,D=0,ue());case 2:case"end":return e.stop()}},e,void 0)})),function(e){return g.apply(this,arguments)})),j.tail("postMyRejection",(b=h(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.default.sleep(1e3),S<3?ue(S+=1,10):(S=1,D=0);case 2:case"end":return e.stop()}},e,void 0)})),function(e){return b.apply(this,arguments)})),j.tail("ll",function(){console.log("ll function")}),chrome.browserAction.onClicked.addListener(function(e){s()}),chrome.runtime.onMessage.addListener(function(e,t,n){"sendDarenPage"===e.greeting&&(w.includes(e.darenPageUrl)||(w=[].concat(p(w),[e.darenPageUrl])),e.islast&&(console.log("开始打开达人首页爬数据.共有"+w.length+"个达人"),w.forEach(function(e,t){var n;chrome.tabs.getSelected(null,(n=h(o.default.mark(function t(n){var r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.default.sleep(3e3),r=n.id,chrome.tabs.update(r,{url:e,selected:!0}),l.default.sleep(300);case 4:case"end":return t.stop()}},t,this)})),function(e){return n.apply(this,arguments)}))})),n({jj:"kjdsjfd"})),"postDarenData"==e.greeting&&$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskDetail.wb",type:"post",data:e.data,success:function(e){console.log("post 达人首页数据 结果："+e)}}),"VSCmission"==e.greeting&&chrome.tabs.getSelected(null,function(e){var t=this;T||(T=e.id),F(x,50).then(function(e){var n;e.result.list.forEach((n=h(o.default.mark(function n(r,a){var s,i,u,c,f,d;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=a==e.result.list.length-1,i={darenId:r.darenId,darenName:r.darenName,vUrl:""},u={darenId:r.darenId},c={darenId:r.darenId,statType:1},f={darenId:r.darenId,statType:2},d={darenId:r.darenId,statType:3},q(r.darenId).then(function(){var e=h(o.default.mark(function e(n){var p,h,v,m,y,g,b,w,k,S;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=93;break}if(i.fansCount=n?n.fansCount:0,i.agencyName=n&&n.darenAgency&&n.darenAgency.agencyName?n.darenAgency.agencyName:0,i.agencyUrl=n&&n.darenAgency&&n.darenAgency.agencyID?"https://v.taobao.com/v/home?spm=a21xh.11250901.0.0.6a6f6b6fpgjIgW&userId="+n.darenAgency.agencyID:"",i.scoreDarenCapacity=n?n.darenScore:0,i.orderTakingRate=n&&n.darenMissionData&&n.darenMissionData.receiveRate?n.darenMissionData.receiveRate:"",i.orderTakingResponseTime=n&&n.darenMissionData&&n.darenMissionData.responseTime?n.darenMissionData.responseTime:"",i.serviceTotalCustomer=n&&n.darenMissionData&&n.darenMissionData.cooperateSellerCount?n.darenMissionData.cooperateSellerCount:0,i.serviceTotalQuantity=n&&n.darenMissionData&&n.darenMissionData.completeMission?n.darenMissionData.completeMission:"",i.serviceType=n&&n.darenMissionData&&n.darenMissionData.servType?n.darenMissionData.servType:"",i.serviceDomain=n?n.area:0,i.introduction="",!n||!n.desc){e.next=38;break}if(!n.desc.match(/^{(.*)}$/)){e.next=35;break}for(h=!(p=!0),v=void 0,e.prev=17,m=JSON.parse(n.desc).blocks[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)g=y.value,i.introduction+=g.text;e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),h=!0,v=e.t0;case 25:e.prev=25,e.prev=26,!p&&m.return&&m.return();case 28:if(e.prev=28,h)throw v;e.next=31;break;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=36;break;case 35:i.introduction+=n.desc;case 36:e.next=39;break;case 38:console.log(a+" unexpected in json");case 39:return i.identityType="",i.serviceScore=n&&n.darenMissionData&&n.darenMissionData.avgScore?n.darenMissionData.avgScore:"",i.orderTakingFinishRate=n&&n.darenMissionData&&n.darenMissionData.completeRate?n.darenMissionData.completeRate:"",l.default.sleep(200),e.next=45,V(r.darenId);case 45:return b=e.sent,i.contentPub7Days=b.result&&b.result.publish?b.result.publish:0,i.contentBrowse7Days=b.result&&b.result.text_pv?b.result.text_pv:0,i.contentGuide7Days=b.result&&b.result.ipv?b.result.ipv:0,i.contentLiveBrowse7Days=b.result&&b.result.live_pv?b.result.live_pv:0,i.contentVideoBrowse7Days=b.result&&b.result.video_pv?b.result.video_pv:0,c.contentPub=b.result&&b.result.publish?b.result.publish:0,c.contentBrowse=b.result&&b.result.text_pv?b.result.text_pv:0,c.contentGuide=b.result&&b.result.ipv?b.result.ipv:0,c.contentLiveBrowse=b.result&&b.result.live_pv?b.result.live_pv:0,c.contentVideoBrowse=b.result&&b.result.video_pv?b.result.video_pv:0,l.default.sleep(200),e.next=59,V(r.darenId,30);case 59:return w=e.sent,i.contentPub30Days=w.result&&w.result.publish?w.result.publish:0,i.contentBrowse30Days=w.result&&w.result.text_pv?w.result.text_pv:0,i.contentGuide30Days=w.result&&w.result.ipv?w.result.ipv:0,i.contentLiveBrowse30Days=w.result&&w.result.live_pv?w.result.live_pv:0,i.contentVideoBrowse30Days=w.result&&w.result.video_pv?w.result.video_pv:0,f.contentPub=w.result&&w.result.publish?w.result.publish:0,f.contentBrowse=w.result&&w.result.text_pv?w.result.text_pv:0,f.contentGuide=w.result&&w.result.ipv?w.result.ipv:0,f.contentLiveBrowse=w.result&&w.result.live_pv?w.result.live_pv:0,f.contentVideoBrowse=w.result&&w.result.video_pv?w.result.video_pv:0,l.default.sleep(200),e.next=73,V(r.darenId,90);case 73:return k=e.sent,i.contentPub90Days=k.result&&k.result.publish?k.result.publish:0,i.contentBrowse90Days=k.result&&k.result.text_pv?k.result.text_pv:0,i.contentGuide90Days=k.result&&k.result.ipv?k.result.ipv:0,i.contentLiveBrowse90Days=k.result&&k.result.live_pv?k.result.live_pv:0,i.contentVideoBrowse90Days=k.result&&k.result.video_pv?k.result.video_pv:0,d.contentPub=k.result&&k.result.publish?k.result.publish:0,d.contentBrowse=k.result&&k.result.text_pv?k.result.text_pv:0,d.contentGuide=k.result&&k.result.ipv?k.result.ipv:0,d.contentLiveBrowse=k.result&&k.result.live_pv?k.result.live_pv:0,d.contentVideoBrowse=k.result&&k.result.video_pv?k.result.video_pv:0,l.default.sleep(200),e.next=87,U(r.darenId);case 87:return S=e.sent,u=Object.assign({},u,S),e.next=91,H(i,u,c,f,d,s);case 91:e.next=94;break;case 93:s&&(x<_?(x++,chrome.tabs.sendRequest(T,{greeting:"vm-turnpage",page:x})):x==_&&(_=-(x=1)));case 94:case"end":return e.stop()}},e,t,[[17,21,25,33],[26,,28,32]])}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return n.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)}))}).catch(function(e){console.log("getDarenId error",e)})}),"VSCdarenIdmission"==e.greeting&&(chrome.runtime.sendMessage({greeting:"popupTips"},function(e){console.log("response")}),K().then(function(){Q(u.vedioCateType,u.cateType).then(function(){ee(u.TWCateTypeList,u.darenFansCountList,u.darenRoleList,u.darenChannel).then(function(){re()})})})),"vTHEmission"==e.greeting&&chrome.tabs.query({active:!0,currentWindow:!0},function(e){T=e.length?e[0].id:null,ae().then(function(e){0==e.status&&se(S,10),999==e.status&&chrome.tabs.sendRequest(T,{greeting:"v-notLogin"},function(e){})})})});var I,C,E,A,P,N,O,R,F=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20;return new Promise(function(n,r){$.ajax({url:c.default.willbeServer+"/tb/v/getAllVTaskDarenIds.wb",headers:{token:k},data:{page:e,pageSize:t},success:function(e){0==e.status?(_<=0&&(_=e.result.maxPage),n(e)):(_=-1,r(e.msg))},erroe:function(e){_=-1,r(e.msg)}})})},q=function(e){return new Promise(function(t,n){$.ajax({url:"https://v.taobao.com/micromission/daren/daren_main_portalv3.do?userId="+e+"&spm=a21xh.11312869.industryArea_0_30008_darenCol.2.75a8627fK87XrV&_ksTS=1550107520153_17",success:function(e){0==(e=JSON.parse(e)).status?t(e.data):t(null)},error:function(e){t(null)}})})},V=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:7;return new Promise(function(n,r){$.ajax({url:"https://v.taobao.com/micromission/GetDarenContentStatistic.do?userId="+e+"&cycle="+t+"&_ksTS=1548233873983_143",success:function(e){0==(e=JSON.parse(e)).status?n(e.data):r(e.msg)},error:function(e){r(e.msg)}})})},H=function(e,t,n,r,a){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskDetail.wb",type:"post",async:!1,headers:{token:k,"Content-Type":"application/x-www-form-urlencoded"},data:e,success:function(e){}}),l.default.sleep(50),$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskFans.wb",type:"post",async:!1,headers:{token:k,"Content-Type":"application/json"},data:JSON.stringify(t),success:function(e){}}),l.default.sleep(50),$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskStat.wb",type:"post",async:!1,headers:{token:k,"Content-Type":"application/x-www-form-urlencoded"},data:n,success:function(e){}}),l.default.sleep(50),$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskStat.wb",type:"post",async:!1,headers:{token:k,"Content-Type":"application/x-www-form-urlencoded"},data:r,success:function(e){}}),l.default.sleep(50),$.ajax({url:c.default.willbeServer+"/tb/v/syncVTaskStat.wb",type:"post",async:!1,headers:{token:k,"Content-Type":"application/x-www-form-urlencoded"},data:a,success:function(e){},error:function(){}}),o&&x<_?(x++,chrome.tabs.sendRequest(T,{greeting:"vm-turnpage",page:x})):o&&x==_&&(_=-(x=1))},U=function(e){return new Promise(function(t,n){$.ajax({url:"https://v.taobao.com/micromission/daren/qry_fans_portrait.do?userId="+e+"&_ksTS=1548399407613_101",success:function(e){0==(e=JSON.parse(e)).status?t(e.data.fansFeature):n(e.msg)},error:function(e){n(e.msg)}})})},J=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return new Promise(function(a,o){$.ajax({url:"https://v.taobao.com/micromission/req/selectCreatorV3.do",data:{cateType:e,fansCount:t,currentPage:r,role:n,_ksTS:"1550732344164_101",_output_charset:"UTF-8",_input_charset:"UTF-8"},success:function(e){0==(e=JSON.parse(e)).status?a(e.data):a(null)},error:function(){a(null)}})})},B=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(r,a){var o={cateType:e,videoCateType:t,currentPage:n,_ksTS:"1551253834204_269",_output_charset:"UTF-8",_input_charset:"UTF-8"};t||delete o.videoCateType,$.ajax({url:"https://v.taobao.com/micromission/req/selectCreatorV3.do",data:o,success:function(e){0==(e=JSON.parse(e)).status?r(e.data):r(null)},error:function(){r(null)}})})},G=function(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;return new Promise(function(o,s){$.ajax({url:"https://v.taobao.com/micromission/req/selectCreatorV3.do",data:{cateType:e,fansCount:t,currentPage:a,role:n,channelName:r,_ksTS:"1551259112356_465",_output_charset:"UTF-8",_input_charset:"UTF-8"},success:function(e){0==(e=JSON.parse(e)).status?o(e.data):o(null)},error:function(){o(null)}})})},z=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:30;return new Promise(function(r,a){$.ajax({url:"https://v.taobao.com/micromission/select_micro_mission_subject_daren_v2.do",data:{subjectId:e,page:t,pageSize:n,_ksTS:"1551321913629_31",_input_charset:"utf-8",_output_charset:"utf-8"},success:function(e){0==(e=JSON.parse(e)).status?r(e.data):r(null)},error:function(){r(null)}})})},W=function(e){e.forEach(function(e){$.ajax({url:c.default.willbeServer+"/tb/v/syncSingleRecordDarenIdsAndName.wb",type:"post",async:!1,headers:{token:k},data:{darenId:e.userId,darenName:e.nick},success:function(e){console.log("k",e)}})})},K=(I=h(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],u.darenCateTypeList.forEach(function(){var e=h(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.darenFansCountList.forEach(function(){var e=h(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.darenRoleList.forEach(function(){var e=h(o.default.mark(function e(a){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.push([n,r,a]);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),console.log("darenCateType, darenFansCount, darenRole",t),n=0;case 4:if(n<t.length)return e.next=7,Y(t[n][0],t[n][1],t[n][2]);e.next=10;break;case 7:n++,e.next=4;break;case 10:case"end":return e.stop()}},e,void 0)})),function(){return I.apply(this,arguments)}),Y=(C=h(o.default.mark(function e(t,n,r){var a,s,i,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,n,r);case 2:if(a=e.sent,s=a.totalCounts?Math.ceil(a.totalCounts/20):0,a.result&&W(a.result),!(1<s)){e.next=15;break}i=2;case 7:if(i<=s)return e.next=10,J(t,n,r,i);e.next=15;break;case 10:(u=e.sent).result&&W(u.result);case 12:i++,e.next=7;break;case 15:case"end":return e.stop()}},e,void 0)})),function(e,t,n){return C.apply(this,arguments)}),Z=(E=h(o.default.mark(function e(t){var n,r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.cateType,t.vedioCateType||"");case 2:if(n=e.sent,r=n.totalCounts?Math.ceil(n.totalCounts/20):0,n.result&&W(n.result),!(1<r)){e.next=15;break}a=2;case 7:if(a<=r)return e.next=10,B(t.cateType,t.vedioCateType||"",a);e.next=15;break;case 10:(s=e.sent).result&&W(s.result);case 12:a++,e.next=7;break;case 15:case"end":return e.stop()}},e,void 0)})),function(e){return E.apply(this,arguments)}),Q=(A=h(o.default.mark(function e(t,n){var r,a,s,i,u,c,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n.forEach(function(e){"602"==e?t.forEach(function(t){r.push({cateType:e,vedioCateType:t})}):r.push({cateType:e})}),s=!(a=!0),i=void 0,e.prev=5,u=r[Symbol.iterator]();case 7:if(a=(c=u.next()).done){e.next=15;break}return l=c.value,e.next=11,Z(l);case 11:e.sent;case 12:a=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),s=!0,i=e.t0;case 21:e.prev=21,e.prev=22,!a&&u.return&&u.return();case 24:if(e.prev=24,s)throw i;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,void 0,[[5,17,21,29],[22,,24,28]])})),function(e,t){return A.apply(this,arguments)}),X=(P=h(o.default.mark(function e(t){var n,r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t.cateType,t.fansCount,t.role,t.channelName);case 2:if(n=e.sent,r=n.totalCounts?Math.ceil(n.totalCounts/20):0,n.result&&W(n.result),!(1<r)){e.next=15;break}a=2;case 7:if(a<=r)return e.next=10,G(t.cateType,t.fansCount,t.role,t.channelName,a);e.next=15;break;case 10:(s=e.sent).result&&W(s.result);case 12:a++,e.next=7;break;case 15:case"end":return e.stop()}},e,void 0)})),function(e){return P.apply(this,arguments)}),ee=(N=h(o.default.mark(function e(t,n,r,a){var s,i,u,c,l,f,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=[],t.forEach(function(e){n.forEach(function(t){r.forEach(function(n){a.forEach(function(r){s.push({cateType:e,fansCount:t,role:n,channelName:r})})})})}),u=!(i=!0),c=void 0,e.prev=5,l=s[Symbol.iterator]();case 7:if(i=(f=l.next()).done){e.next=15;break}return d=f.value,e.next=11,X(d);case 11:e.sent;case 12:i=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),u=!0,c=e.t0;case 21:e.prev=21,e.prev=22,!i&&l.return&&l.return();case 24:if(e.prev=24,u)throw c;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,void 0,[[5,17,21,29],[22,,24,28]])})),function(e,t,n,r){return N.apply(this,arguments)}),te=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12;return new Promise(function(n,r){$.ajax({url:"https://v.taobao.com/micromission/subjectPageV2.do",data:{tabKey:0,pageSize:t,current_page:e,channel:"全部",subject_scene:"全部",_ksTS:"1551321708603_255",_input_charset:"utf-8",_output_charset:"UTF-8"},success:function(e){if(0==(e=JSON.parse(e)).status){var t=e.data,r=t.subjects,a=t.total,o=t.pageSize;n({subjects:r,total:a,pageSize:o})}else n(null)},error:function(e){console.log("error:",e),n(null)}})})},ne=(O=h(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=1,n=[],e.next=4,te();case 4:r=e.sent,t=Math.ceil(r.total/r.pageSize),r.subjects.forEach(function(e){n.push(e.id)}),a=2;case 8:if(a<=t)return e.next=11,te(a);e.next=16;break;case 11:e.sent.subjects.forEach(function(e){n.push(e.id)});case 13:a++,e.next=8;break;case 16:return e.abrupt("return",new Promise(function(e,t){e(n)}));case 17:case"end":return e.stop()}},e,void 0)})),function(){return O.apply(this,arguments)}),re=(R=h(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ne().then(function(e){var t;e.forEach((t=h(o.default.mark(function e(t){var n,r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,1,30);case 2:if(n=e.sent,r=Math.ceil(n.total/30),n.dataList&&W(n.dataList),!(1<r)){e.next=16;break}a=2;case 7:if(a<=r)return e.next=10,z(t,a,30);e.next=16;break;case 10:(s=e.sent).dataList&&W(s.dataList),a==r&&chrome.runtime.sendMessage({greeting:"HidePopupTips"},function(e){console.log("response")});case 13:a++,e.next=7;break;case 16:case"end":return e.stop()}},e,void 0)})),function(e){return t.apply(this,arguments)}))});case 1:case"end":return e.stop()}},e,void 0)})),function(){return R.apply(this,arguments)}),ae=function(){return new Promise(function(e,t){$.ajax({url:"https://v.taobao.com/micromission/check_identity.do?_ksTS=1557732288829_45",success:function(t){e(JSON.parse(t))},error:function(e){t(e)}})})},oe=function(e,t){$.ajax({url:"https://v.taobao.com/micromission/req/get_micro_mission_daren_merchant_by_status.do",data:e,success:function(n){var r=JSON.parse(n);if(0==r.status){if(D=r.data.result?r.data.result.pagination.totalPage:D,e.micro_mission_status&&-1==e.micro_mission_status)for(var a=0;a<r.data.result.microMissions.length;a++){var o=r.data.result.microMissions[a].microSubmissions[0].id;$.ajax({url:"https://v.taobao.com/micromission/get_mission_detail_info.do?mission_id="+o+"&_ksTS=1557823555405_17",success:function(e){console.log("detail page",JSON.parse(e)),j.emit("ll",JSON.parse(e))}})}j.emit(t,r.data.result)}else j.emit(t,{})},error:function(e){j.emit(t,{})}})},se=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;oe({current_page:e,pageSize:t,micro_mission_status:-1,_tb_token_:"5731ae673367e",_ksTS:"1557802041473_69",_output_charset:"UTF-8",_input_charset:"UTF-8"},"postFinishAll")},ie=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;oe({current_page:e,pageSize:t,micro_mission_status:0,query_type:0,owner_status:1,_tb_token_:"5731ae673367e",_ksTS:"1557813941516_97",_output_charset:"UTF-8",_input_charset:"UTF-8"},"postMyVerification")},ue=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;oe({current_page:e,pageSize:t,micro_mission_status:2,query_type:0,owner_status:1,_tb_token_:"5731ae673367e",_ksTS:"1557813941516_97",_output_charset:"UTF-8",_input_charset:"UTF-8"},"postMyRejection")}},function(e,t,n){e.exports=n(5)},function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(6),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=w;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",v={},m={};m[s]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==r&&a.call(g,s)&&(m=g);var b=T.prototype=_.prototype=Object.create(m);k.prototype=b.constructor=T,T.constructor=k,T[u]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},S(D.prototype),D.prototype[i]=function(){return this},l.AsyncIterator=D,l.async=function(e,t,n,r){var a=new D(w(e,t,n,r));return l.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(b),b[u]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,a){return i.type="throw",i.arg=e,t.next=r,a&&(t.method="next",t.arg=n),!!a}for(var o=this.tryEntries.length-1;0<=o;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function w(e,t,n,r){var a,o,s,i,u=t&&t.prototype instanceof _?t:_,c=Object.create(u.prototype),l=new I(r||[]);return c._invoke=(a=e,o=n,s=l,i=f,function(e,t){if(i===p)throw new Error("Generator is already running");if(i===h){if("throw"===e)throw t;return E()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=j(n,s);if(r){if(r===v)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(i===f)throw i=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);i=p;var u=x(a,o,s);if("normal"===u.type){if(i=s.done?h:d,u.arg===v)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(i=h,s.method="throw",s.arg=u.arg)}}),c}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function _(){}function k(){}function T(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function D(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,s){var i=x(e[n],e,r);if("throw"!==i.type){var u=i.arg,c=u.value;return c&&"object"==typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},s)}s(i.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function j(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,j(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=x(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={$http:function(e,t){return new Promise(function(n,r){var a=new XMLHttpRequest;a.open(e,t,!0),a.onreadystatechange=function(){if(4==a.readyState){var e=JSON.parse(a.responseText);n(e)}},a.send()})},sleep:function(e){for(var t=new Date,n=t.getTime()+e;;)if((t=new Date).getTime()>n)return},getDateRange:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime(),n=new Date(t-24*e*60*60*1e3),r=n.getMonth()+1;return r=9<r?r:"0"+r,n.getFullYear()+"-"+r+"-"+n.getDate()}}},function(e,t,n){e.exports=n(9)},function(e,t,n){(function(r,a){var o,s,i,u,c;!function(r,a){e.exports,o=function(){return function(){}}.call((s={id:"eventproxy_debug",exports:{},loaded:!1}).exports,n,s.exports,s),s.loaded=!0,void 0!==o||(o=s.exports),u=[o],void 0===(c="function"==typeof(i=a)?i.apply(t,u):i)||(e.exports=c)}(0,function(e){e=e||function(){};
/*!
   * refs
   */
var t=Array.prototype.slice,n=Array.prototype.concat,o="__all__",s=function(){if(!(this instanceof s))return new s;this._callbacks={},this._fired={}};s.prototype.addListener=function(t,n){return e("Add listener for %s",t),this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(n),this},s.prototype.bind=s.prototype.addListener,s.prototype.on=s.prototype.addListener,s.prototype.subscribe=s.prototype.addListener,s.prototype.headbind=function(t,n){return e("Add listener for %s",t),this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].unshift(n),this},s.prototype.removeListener=function(t,n){var r=this._callbacks;if(t)if(n){var a=r[t];if(a)for(var o=a.length,s=0;s<o;s++)n===a[s]&&(e("Remove a listener of %s",t),a[s]=null)}else e("Remove all listeners of %s",t),r[t]=[];else e("Remove all listeners"),this._callbacks={};return this},s.prototype.unbind=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){return this.unbind(e)},s.prototype.bindForAll=function(e){this.bind(o,e)},s.prototype.unbindForAll=function(e){this.unbind(o,e)},s.prototype.trigger=function(t,n){var r,a,s,i,u=2,c=this._callbacks;for(e("Emit event %s with data %j",t,n);u--;)if(r=c[u?t:o])for(s=0,i=r.length;s<i;s++)if(a=r[s]){for(var l=[],f=u?1:0;f<arguments.length;f++)l.push(arguments[f]);a.apply(this,l)}else r.splice(s,1),s--,i--;return this},s.prototype.emit=s.prototype.trigger,s.prototype.fire=s.prototype.trigger,s.prototype.once=function(e,t){var n=this,r=function(){t.apply(n,arguments),n.unbind(e,r)};return this.bind(e,r),this};var i=void 0!==r&&r||void 0!==a&&a.nextTick||function(e){setTimeout(e,0)};s.prototype.emitLater=function(){var e=this,t=arguments;i(function(){e.trigger.apply(e,t)})},s.prototype.immediate=function(e,t,n){return this.bind(e,t),this.trigger(e,n),this},s.prototype.asap=s.prototype.immediate;var u=function(n,r,a,o){var s=this,i=arguments.length,u=0,c={};if(i<3)return this;var l=t.call(arguments,0,-2),f=arguments[i-2],d=arguments[i-1];if("function"!=typeof f)return this;e("Assign listener for events %j, once is %s",l,!!d);for(var p=function(e){s[d?"once":"bind"](e,function(t){s._fired[e]=s._fired[e]||{},s._fired[e].data=t,c[e]||(c[e]=!0,u++)})},h=l.length,v=0;v<h;v++)p(l[v]);var m=function(t){if(!(u<h)&&c[t]){for(var n=[],r=0;r<h;r++)n.push(s._fired[l[r]].data);d&&s.unbindForAll(m),e("Events %j all emited with data %j",l,n),f.apply(null,n)}};s.bindForAll(m)};return s.prototype.all=function(e,t,r){var a=n.apply([],arguments);return a.push(!0),u.apply(this,a),this},s.prototype.assign=s.prototype.all,s.prototype.fail=function(e){var t=this;return t.once("error",function(){t.unbind(),e.apply(null,arguments)}),this},s.prototype.throw=function(){this.emit.apply(this,["error"].concat(t.call(arguments)))},s.prototype.tail=function(){var e=n.apply([],arguments);return e.push(!1),u.apply(this,e),this},s.prototype.assignAll=s.prototype.tail,s.prototype.assignAlways=s.prototype.tail,s.prototype.after=function(t,n,r){if(0===n)return r.call(null,[]),this;var a=this,o=[];this._after=this._after||{};var s=t+"_group";this._after[s]={index:0,results:[]},e("After emit %s times, event %s's listenner will execute",n,t);var i=function(u,c){u===t&&(n--,o.push(c),n<1&&(e("Event %s was emit %s, and execute the listenner",t,n),a.unbindForAll(i),r.apply(null,[o]))),u===s&&(n--,a._after[s].results[c.index]=c.result,n<1&&(e("Event %s was emit %s, and execute the listenner",t,n),a.unbindForAll(i),r.call(null,a._after[s].results)))};return a.bindForAll(i),this},s.prototype.group=function(e,n){var r=this,a=e+"_group",o=r._after[a].index;return r._after[a].index++,function(e,s){if(e)return r.emit.apply(r,["error"].concat(t.call(arguments)));r.emit(a,{index:o,result:n?n.apply(null,t.call(arguments,1)):s})}},s.prototype.any=function(){var n=this,r=arguments[arguments.length-1],a=t.call(arguments,0,-1),o=a.join("_");e("Add listenner for Any of events %j emit",a),n.once(o,r);for(var s=function(t){n.bind(t,function(r){e("One of events %j emited, execute the listenner"),n.trigger(o,{data:r,eventName:t})})},i=0;i<a.length;i++)s(a[i])},s.prototype.not=function(t,n){e("Add listenner for not event %s",t),this.bindForAll(function(r,a){r!==t&&(e("listenner execute of event %s emit, but not event %s.",r,t),n(a))})},s.prototype.done=function(e,n){var r=this;return function(a,o){if(a)return r.emit.apply(r,["error"].concat(t.call(arguments)));var s=t.call(arguments,1);return"string"==typeof e?n?r.emit(e,n.apply(null,s)):r.emit.apply(r,[e].concat(s)):arguments.length<=2?e(o):void e.apply(null,s)}},s.prototype.doneLater=function(e,t){var n=this.done(e,t);return function(e,t){var r=arguments;i(function(){n.apply(null,r)})}},s.create=function(){var e=new s,t=n.apply([],arguments);if(t.length){var r=t[t.length-1],a=t[t.length-2];"function"==typeof r&&"function"==typeof a&&(t.pop(),e.fail(r)),e.assign.apply(e,t)}return e},s.EventProxy=s})}).call(this,n(10).setImmediate,n(1))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(11),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,o,s,i,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,r="[object process]"==={}.toString.call(e.process)?function(e){t.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(a=f.documentElement,function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[u]=a,r(u),u++},d.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(1))},function(e,t,n){(function(r){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=Object({NODE_ENV:"local"}).DEBUG),e}(t=e.exports=n(13)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var a=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(a++,"%c"===e&&(o=a))}),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(this,n(1))},function(e,t,n){var r;function a(e){function n(){if(n.enabled){var e=n,a=+new Date,o=a-(r||a);e.diff=o,e.prev=r,e.curr=a,r=a;for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var a=t.formatters[r];if("function"==typeof a){var o=s[u];n=a.call(e,o),s.splice(u,1),u--}return n}),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,a=0;a<r;a++)n[a]&&("-"===(e=n[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=36e5,r=864e5;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var o,s=typeof e;if("string"===s&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*a;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?a(o=e,r,"day")||a(o,n,"hour")||a(o,6e4,"minute")||a(o,1e3,"second")||o+" ms":function(e){return r<=e?Math.round(e/r)+"d":n<=e?Math.round(e/n)+"h":6e4<=e?Math.round(e/6e4)+"m":1e3<=e?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}]);